# PHPUnit
Small project in Laravel framework for getting familiar with writing tests using PHPUnit utility.

### Installing
```
git clone <link to repositry>
cd <repository_name>
cp .env.example .env
composer install
php artisan key:generate
php artisan migrate:fresh --seed
```

### Project info
Проект представляет собой реализацию простейшей барахолки с возможностью добавлять, просматривать, а так же удалять 
объявления о продаже товаров. Только зарегистрированные пользователи могут добавлять товары на продажу, а так же обязаны
 удалять их после продажи. Для простоты использования у товаров есть только имя и цена.

## What you have to do
**Task #1: знакомство с приложением** *(1 бал)*  
Сейчас у каждого зашедшего на ресурс пользователя есть возможноть удалить любой товар из списка. Это предстоит 
поправить. Удалить товар может только зарегистрированный пользователь, который добавил данный товар в каталог. Кнопка 
удаления должна быть перемещена в личный кабинет.
    
**Task #2: модульные тесты для методов сервиса [Market Service](https://github.com/vlvereta/PHPUnit/blob/master/app/Services/MarketService.php)** *(2 бала)*  
Необходимо проверить работу методов (`getProductList()`, `getProductById()`, `getProductsByUserId()`, 
`storeProduct()`), а так же соответствие требованиям проекта. При создании тестов необходимо использовать
моки, стабы и встроенные assertions. При создании модульных тестов, работа с базой данных запрещена!  
*P.S. При выполнении этого задания вы должны обнаружить ошибку, которую нужно зафиксить и протестировать :\)* *(1 бал)*

**Task #3: тестирование роутов и работы приложения в целом** *(4 бала)*  
В данной части задания необходимо протестировать работу приложения посредством предоставляемых фреймворком возможностей. 
Используя написанные роуты для отображения, добавления и удаления товаров нужно протестировать их работу. Но сначала 
нужно прописать работу [ApiController](https://github.com/vlvereta/PHPUnit/blob/master/app/Http/Controllers/ApiController.php).  
Работаем со следующим шейпом данных:
* Отображение списка товаров

`GET /api/items`<br>
`Content-type: application/json`<br>
`Status code: 200`<br>
`Request data: `<br>
```
[
    {
        "id": <int>,
        "name": <string>,
        "price": <string>,
        "user_id": <int>
    },
    ...
]}
```

* Добавление товара

`POST /api/items`<br>
`Content-type: application/json`<br>
`Status code: 201`<br>
`Request data: `<br>
```
{
    "id": <int>,
    "name": <string>,
    "price": <string>,
    "user_id": <int>
}
```

* Информация о товаре

`GET /api/items/{id}`<br>
`Content-type: application/json`<br>
`Status code: 200`<br>
`Response:`<br>
```
{
    "id": <int>,
    "name": <string>,
    "price": <string>,
    "user_id": <int>
}
```

* Удаления товара

`POST /api/items/{id}`<br>
`Content-type: application/json`<br>
`Status code: 201`<br>
`Response:`<br>
```
{
    "id": <int>,
    "name": <string>,
    "price": <string>,
    "user_id": <int>
}
```

Для ошибки будем использовать код `400`, а для идентификации отказа в доступе - `403`.
Для создания фейковых данных рекомендуется использовать фабрики Laravel. Так же, be free to improve the app 
*(добавить кастомные исключения, кастомные запросы, коды ошибок и тд.)*.

### Evaluation
Для сдачи домашнего задания необходимо отправить ссылку на репозиторий. Оценка зависит от количества и качества выполненных
 пунктов и может достигнуть своего максимального уровня в 10 балов. Послдние два бала вы можете получить за 
использование рекомендуемых способов реализации, а так же общее влияние на приложение и улучшение кодовой базы

---

*in ukrainian:*

### Project info
Проект являє собою реалізацію найпростішої барахолки з можливістю додавати, проглядати, а також видаляти оголошення про 
продаж товарів. Тільки зареєстровані користувачі можуть додавати товари на продаж, а також зобов'язані видаляти їх після 
продажу. Для простоти використання у товарів наявні тільки назва та ціна.

## What you have to do
**Task #1: знайомство з додатком** *(1 бал)*  
Наразі у кожного відвідувача ресурсу є можливість видалити будь-який товар із списку. Це належить виправити. Видаляти 
товар може тільки зареєстрованний користувач, який попередньо додав саме цей товар у каталог. Кнопка видалення має бути 
переміщена в особистий кабінет.
    
**Task #2: модульні тести для методів сервісу [Market Service](https://github.com/vlvereta/PHPUnit/blob/master/app/Services/MarketService.php)** *(2 бала)*  
Необхідно перевірити роботу методів (`getProductList()`, `getProductById()`, `getProductsByUserId()`, `storeProduct()`), 
а також відповідність до вимог проекту. При створенні тестів необхідно використовувати моки, стаби та вбудовані assertions. 
При написанні модульних тестів робота с базою даних заборонена!   
*P.S. При виконанні цього завдання ви повинні знайти помилку, яку необхідно зафіксити та протестувати :\)* *(1 бал)*

**Task #3: тестування роутів та роботи додатку в цілому** *(4 бала)*  
У данній частині завдання необхідно протестувати роботу додатку із використанням вбудованних у фреймворк можливостей. 
Використовуючи написані роути для відображення, додавання та видалення товарів необхідно затестити їх роботу. Але спочатку 
необхідно прописати роботу [ApiController](https://github.com/vlvereta/PHPUnit/blob/master/app/Http/Controllers/ApiController.php).  
Працюємо з наступним шейпом даних:
* Відображення списку товарів

`GET /api/items`<br>
`Content-type: application/json`<br>
`Status code: 200`<br>
`Request data: `<br>
```
[
    {
        "id": <int>,
        "name": <string>,
        "price": <string>,
        "user_id": <int>
    },
    ...
]}
```

* Додавання товару

`POST /api/items`<br>
`Content-type: application/json`<br>
`Status code: 201`<br>
`Request data: `<br>
```
{
    "id": <int>,
    "name": <string>,
    "price": <string>,
    "user_id": <int>
}
```

* Інформація про товар

`GET /api/items/{id}`<br>
`Content-type: application/json`<br>
`Status code: 200`<br>
`Response:`<br>
```
{
    "id": <int>,
    "name": <string>,
    "price": <string>,
    "user_id": <int>
}
```

* Видалення товару

`POST /api/items/{id}`<br>
`Content-type: application/json`<br>
`Status code: 201`<br>
`Response:`<br>
```
{
    "id": <int>,
    "name": <string>,
    "price": <string>,
    "user_id": <int>
}
```

Для помилки використаємо код `400`, а для ідентифікації відмови у доступі - `403`.
Для створення фейкових данних рекомендовано використовувати фабрики Laravel. Також, be free to improve the app 
*(додати кастомні виключення, кастомні запити, коди помилок та інше)*.

### Evaluation
Для здачі домашнього завдання необхідно відправити урл на репозиторій. Оцінка залежить від кількості та якості виконаних 
пунктів та може досягти максимального рівня у 10 балів. Останні два бали ви можете отримати за використання 
рекомендованих способів реалізації, а також загальний вплив на додаток та покращення кодової бази.